include mixins/_feed-item
include mixins/_author
extends layouts/_general

block content
  section
    .grid.grid--align-center.grid--bleed
      .grid__col-2: h1 Feed
      .grid__col-7: ul.filters
        li(id='all') All
        for cat in helpers.getCategories(site)
          li(id=cat)= cat

      .grid__col-3.grid--justify-end: .search
        include includes/svg/_search
        input#search(type='search', results=5, autocomplete, placeholder='Search', x-webkit-speech)

    //- Articles
    ul#feed-grid.grid.reverse-margin-md
      - var mergedPosts = helpers.getMergedPosts(site, records)
      //- sort by date
      - var postsSortedByDate = _.sortBy(mergedPosts, function(post){ return post.git.date })

      for post in postsSortedByDate
        unless post._ignore
          +feed-item(post)